<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pwnsheet</title>
    <meta name="description" content="Comprehensive pentesting playbook for security professionals">
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header-bar">
        <div class="container-fluid header-inner">
            <h1 class="header-title">Pwnsheet</h1>
            <div class="header-actions">
                <div class="header-tool-group">
                    <button class="header-icon-btn" id="fileTransferBtn" type="button" aria-label="Open file transfer commands" title="File transfer helper">
                        <i class="bi bi-arrow-left-right" aria-hidden="true"></i>
                    </button>
                    <button class="header-icon-btn" id="reverseShellBtn" type="button" aria-label="Open reverse shell generator" title="Shells helper">
                        <i class="bi bi-terminal" aria-hidden="true"></i>
                    </button>
                    <button class="header-icon-btn" id="toolsBtn" type="button" aria-label="Open pentest tools list" title="Tools & wordlists">
                        <i class="bi bi-tools" aria-hidden="true"></i>
                    </button>
                    <button class="header-icon-btn" id="globalSearchBtn" type="button" aria-label="Search all notes" title="Global search">
                        <i class="bi bi-search" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="download-group">
                    <button class="header-icon-btn download-kit-btn" id="downloadKitBtn" type="button" aria-label="Download pentest notes skeleton" title="Download notes skeleton">
                        <i class="bi bi-journal-arrow-down" aria-hidden="true"></i>
                        <span class="sr-only">Notes Skeleton</span>
                    </button>
                    <div class="skeleton-menu" id="skeletonMenu" role="menu">
                        <button type="button" class="skeleton-option" data-template="empty">Empty</button>
                        <button type="button" class="skeleton-option" data-template="prefilled">Prefilled</button>
                        <button class="skeleton-option" data-template="oscp">OSCP</button>
                    </div>
                </div>
                <button class="new-assessment-btn" id="newAssessmentBtn" aria-label="Reset Playbook" title="Reset playbook to defaults" hidden>
                    <i class="bi bi-arrow-counterclockwise" aria-hidden="true"></i>
                    <span class="reset-label">Reset</span>
                </button>
            </div>
        </div>
    </header>

    <div class="container-fluid main-container">
        <div class="row h-100">
            <div class="col-lg-2 col-md-3 col-12 left-panel">
                <div class="panel-card">
                    <h5 class="panel-title">Assessment Phases</h5>
                    <div class="phase-list" id="phaseList">
                        <div class="loading-text">Loading phases...</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-7 col-md-6 col-12 center-panel" id="centerPanel">
                <div class="content-area" id="contentArea">
                    <div class="loading-text">Select a phase to begin your assessment</div>
                </div>
                <button class="scroll-top-btn" id="scrollTopBtn" aria-label="Scroll to top">
                    <span>↑</span>
                </button>
            </div>

            <div class="col-lg-3 col-md-3 col-12 right-panel" id="rightPanel">
                <button class="toggle-panel-btn" id="togglePanelBtn" aria-label="ToggleParameters Panel">
<span>◀</span>
</button>
<div class="panel-card params-panel">
<h5 class="panel-title">Dynamic Parameters</h5>
<div class="params-container" id="paramsContainer">
</div>
</div>
</div>
</div>
</div>
<footer class="footer-bar">
    <div class="container-fluid">
        <p class="footer-text">For Security Professionals · Stay Ethical - <a href="https://github.com/0x8e5afe/pwnsheet" target="_blank" class="text-decoration-none" style="color:var(--accent-color)">
                    <i class="bi bi-github"></i> Contribute on GitHub
                </a></p>
    </div>
</footer>

<div class="pwn-modal" id="initialParamsModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card initial-params-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">Quick setup</p>
                <h2>Core Targets</h2>
                <p class="pwn-modal-subtitle">LHOST is your attacker/listener address. RHOST is the remote host or service you are assessing.</p>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close initial parameters modal">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <p class="modal-helper-text">We prefill every parameter as empty. Set these now or skip and fill them from the Dynamic Parameters panel later.</p>
            <div class="modal-field-grid">
                <label class="modal-field">
                    <span>LHOST</span>
                    <input type="text" id="initialLhost" placeholder="Attacker callback IP (10.10.14.8)" autocomplete="off">
                </label>
                <label class="modal-field">
                    <span>RHOST</span>
                    <input type="text" id="initialRhost" placeholder="Target IP or hostname" autocomplete="off">
                </label>
            </div>
            <div class="modal-actions">
                <button class="ghost-btn" type="button" id="initialParamsSkip">Skip for now</button>
                <button class="primary-btn" type="button" id="initialParamsSave">Save &amp; continue</button>
            </div>
        </div>
    </div>
</div>

<div class="pwn-modal" id="resetConfirmModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">Reset</p>
                <h2>Reset playbook?</h2>
                <p class="pwn-modal-subtitle">This clears all dynamic parameters and checklist progress.</p>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close reset confirmation modal">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <p class="modal-helper-text">You can’t undo this action. Any stored values or completed checkboxes will be removed.</p>
            <div class="modal-actions">
                <button class="ghost-btn" type="button" id="resetCancelBtn" data-close-modal>Keep my data</button>
                <button class="primary-btn" type="button" id="resetConfirmBtn">Reset everything</button>
            </div>
        </div>
    </div>
</div>

<div class="pwn-modal" id="fileTransferModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card transfer-modal-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">File Transfer</p>
                <h2>Cross-OS Transfer Commands</h2>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close file transfer modal">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <div class="modal-section">
                <div class="section-header">
                    <div>
                        <p class="section-kicker">Setup</p>
                        <h3 class="section-title">Source &amp; destination</h3>
                        <p class="section-description">Pick OS pairs and prefill values to animate the helper.</p>
                    </div>
                </div>
                <div class="section-body">
                    <div class="transfer-layout">
                        <div class="transfer-inputs">
                            <div class="modal-field-grid transfer-select-row">
                                <label class="modal-field">
                                    <span>From OS</span>
                                    <select id="transferFrom">
                                        <option value="linux">Linux</option>
                                        <option value="windows">Windows</option>
                                        <option value="macos">macOS</option>
                                    </select>
                                </label>
                                <button class="swap-btn" id="transferSwapBtn" type="button" aria-label="Swap source and destination OS">
                                    <i class="bi bi-arrow-left-right" aria-hidden="true"></i>
                                </button>
                                <label class="modal-field">
                                    <span>To OS</span>
                                    <select id="transferTo">
                                        <option value="windows">Windows</option>
                                        <option value="linux">Linux</option>
                                        <option value="macos">macOS</option>
                                    </select>
                                </label>
                            </div>
                            <div class="modal-field-grid">
                                <label class="modal-field">
                                    <span>Sender IP</span>
                                    <input type="text" id="transferSenderIp" placeholder="e.g., 10.10.14.8" autocomplete="off">
                                </label>
                                <label class="modal-field">
                                    <span>Sender Port</span>
                                    <input type="text" id="transferSenderPort" inputmode="numeric" placeholder="e.g., 8080" autocomplete="off">
                                </label>
                                <label class="modal-field">
                                    <span>Receiver IP</span>
                                    <input type="text" id="transferReceiverIp" placeholder="e.g., 10.10.11.5" autocomplete="off">
                                </label>
                                <label class="modal-field">
                                    <span>Sender User</span>
                                    <input type="text" id="transferSenderUser" placeholder="Optional (e.g., kali)" autocomplete="off">
                                </label>
                                <label class="modal-field">
                                    <span>Filename</span>
                                    <input type="text" id="transferFilename" placeholder="e.g., payload.bin" autocomplete="off">
                                </label>
                            </div>
                        </div>
                        <div class="transfer-visual transfer-animate" id="transferVisual">
                            <div class="transfer-node">
                                <div class="transfer-icon">
                                    <i class="bi bi-terminal" id="transferFromIcon" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="transfer-bridge" aria-hidden="true">
                                <span class="transfer-line">
                                    <span class="transfer-file"></span>
                                </span>
                            </div>
                            <div class="transfer-node">
                                <div class="transfer-icon">
                                    <i class="bi bi-windows" id="transferToIcon" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-section">
                <div class="section-header">
                    <div>
                        <p class="section-kicker">Recipes</p>
                        <h3 class="section-title">Protocol cheatsheet</h3>
                        <p class="section-description">Commands adapt to your OS picks and placeholder values.</p>
                    </div>
                </div>
                        <div class="transfer-table-wrap" data-copy-zone>
                            <table class="transfer-table data-table">
                                <colgroup>
                                    <col>
                                    <col>
                                    <col>
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>Protocol</th>
                                        <th>Attacker Command</th>
                                        <th>Victim Command</th>
                            </tr>
                        </thead>
                        <tbody id="transferTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="pwn-modal" id="reverseShellModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">Remote Code Execution</p>
                <h2>Shells Helper</h2>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close reverse shell modal">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <div class="modal-section">
                <div class="section-header">
                    <div>
                        <p class="section-kicker">Connection</p>
                        <h3 class="section-title">Targets &amp; listeners</h3>
                        <p class="section-description">Populate once and reuse the same values across every helper tab.</p>
                    </div>
                    <span class="section-pill">
                        <i class="bi bi-broadcast-pin" aria-hidden="true"></i>
                        Parameter aware
                    </span>
                </div>
                <div class="section-body">
                    <div class="modal-field-grid">
                        <label class="modal-field">
                            <span>LHOST</span>
                            <input type="text" id="reverseLhost" placeholder="e.g., 10.10.14.8" autocomplete="off">
                            <span class="field-error" id="reverseLhostError"></span>
                        </label>
                        <label class="modal-field">
                            <span>LPORT</span>
                            <input type="text" id="reverseLport" inputmode="numeric" placeholder="e.g., 4444" autocomplete="off">
                            <span class="field-error" id="reverseLportError"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-section">
                <div class="section-header">
                    <div>
                        <p class="section-kicker">Recipes</p>
                        <h3 class="section-title">Shells helper</h3>
                        <p class="section-description">Switch tabs for payloads, upload bypasses, webshells, and stabilisation.</p>
                    </div>
                </div>
                <div class="section-body">
                    <div class="modal-tabs" data-tab-group="reverse-shell">
                        <button class="modal-tab-btn active" type="button" data-tab-target="reverse-generic">Reverse Shells</button>
                        <button class="modal-tab-btn" type="button" data-tab-target="reverse-msfvenom">MSFvenom</button>
                        <button class="modal-tab-btn" type="button" data-tab-target="reverse-webshells">Webshells</button>
                        <button class="modal-tab-btn" type="button" data-tab-target="reverse-upload">Upload Bypass</button>
                        <button class="modal-tab-btn" type="button" data-tab-target="reverse-stab">Stabilisation</button>
                    </div>
                    <div class="tab-panel active" data-tab-panel="reverse-generic">
                        <div class="modal-field-grid single field-stack">
                            <label class="modal-field">
                                <span>Shell Type</span>
                                <select id="reverseType"></select>
                            </label>
                        </div>
                        <div id="reverseCombinedCmd" class="snippet-stack"></div>
                    </div>
                    <div class="tab-panel" data-tab-panel="reverse-msfvenom">
                        <div class="msfvenom-section">
                            <div class="msfvenom-header">
                                <h3>MSFvenom Payload Generator</h3>
                                <p>Build a payload and matching handler command.</p>
                            </div>
                            <div class="modal-field-grid msfvenom-grid">
                                <label class="modal-field">
                                    <span>Payload</span>
                                    <select id="msfvenomPayload"></select>
                                </label>
                                <label class="modal-field">
                                    <span>Output File Name</span>
                                    <input type="text" id="msfvenomOutput" placeholder="payload" autocomplete="off">
                                </label>
                            </div>
                            <div id="msfvenomCombinedCmd" class="snippet-stack"></div>
                        </div>
                    </div>
                    <div class="tab-panel" data-tab-panel="reverse-webshells">
                        <div class="modal-field-grid single field-stack">
                            <label class="modal-field">
                                <span>Webshell Type</span>
                                <select id="reverseWebType"></select>
                            </label>
                        </div>
                        <div id="reverseWebshellCmd" class="snippet-stack reference-content"></div>
                    </div>
                    <div class="tab-panel" data-tab-panel="reverse-upload">
                        <div class="reference-card" data-copy-zone>
                            <div class="reverse-shell-heading">
                                <h3>Upload Bypass</h3>
                                <span>Extension tricks, content-types and magic numbers.</span>
                            </div>
                            <div class="reference-content" id="reverseUploadContent"></div>
                        </div>
                    </div>
                    <div class="tab-panel" data-tab-panel="reverse-stab">
                        <div class="reference-card" data-copy-zone>
                            <div class="reverse-shell-heading">
                                <h3>Shell Stabilisation</h3>
                                <span>Post-exploitation shell hardening steps.</span>
                            </div>
                            <div class="reference-content" id="reverseStabContent"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="pwn-modal" id="toolsModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">Toolbox</p>
                <h2>PT Tooling Quick List</h2>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close tools modal">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <div class="modal-section">
                <div class="section-header">
                    <div>
                        <p class="section-kicker">Reference</p>
                        <h3 class="section-title">Toolbox</h3>
                        <p class="section-description">Search, sort, and copy install snippets or wordlists without leaving the playbook.</p>
                    </div>
                    <span class="section-pill">
                        <i class="bi bi-funnel" aria-hidden="true"></i>
                        Filterable lists
                    </span>
                </div>
                <div class="section-body">
                    <div class="modal-tabs" data-tab-group="tools">
                        <button class="modal-tab-btn active" type="button" data-tab-target="tools-list">Tools</button>
                        <button class="modal-tab-btn" type="button" data-tab-target="wordlists-list">Wordlists</button>
                    </div>
                    <div class="tab-panel active" data-tab-panel="tools-list">
                        <div class="tools-controls">
                            <label class="modal-field tools-search">
                                <span>Search Tools</span>
                                <input type="text" id="toolsSearch" placeholder="Search by tool or category" autocomplete="off">
                            </label>
                        </div>
                        <div class="modal-table-wrap">
                            <table class="modal-table data-table" id="toolsTable">
                                <thead>
                                    <tr>
                                        <th>Tool Name <button class="header-sort-btn" type="button" data-sort-group="tools" data-sort-key="name"><i class="bi bi-chevron-expand" aria-hidden="true"></i><span class="sr-only">Sort by tool name</span></button></th>
                                        <th>Category <button class="header-sort-btn" type="button" data-sort-group="tools" data-sort-key="category"><i class="bi bi-chevron-expand" aria-hidden="true"></i><span class="sr-only">Sort by category</span></button></th>
                                        <th>Setup</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-panel" data-tab-panel="wordlists-list">
                        <div class="tools-controls">
                            <label class="modal-field tools-search">
                                <span>Search Wordlists</span>
                                <input type="text" id="wordlistsSearch" placeholder="Search by wordlist or category" autocomplete="off">
                            </label>
                        </div>
                        <div class="modal-table-wrap" data-copy-zone>
                            <table class="modal-table data-table" id="wordlistsTable">
                                <thead>
                                    <tr>
                                        <th>Wordlist <button class="header-sort-btn" type="button" data-sort-group="wordlists" data-sort-key="name"><i class="bi bi-chevron-expand" aria-hidden="true"></i><span class="sr-only">Sort by wordlist</span></button></th>
                                        <th>Category <button class="header-sort-btn" type="button" data-sort-group="wordlists" data-sort-key="category"><i class="bi bi-chevron-expand" aria-hidden="true"></i><span class="sr-only">Sort by category</span></button></th>
                                        <th>Download</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="pwn-modal" id="globalSearchModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="pwn-modal-backdrop" data-close-modal></div>
    <div class="pwn-modal-card global-search-card" role="document">
        <div class="pwn-modal-header">
            <div>
                <p class="pwn-modal-eyebrow">Global Search</p>
                <h2>Search all notes</h2>
                <p class="pwn-modal-subtitle">Find matches across every phase and jump straight to them.</p>
            </div>
            <button class="pwn-modal-close" type="button" data-close-modal aria-label="Close global search">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="pwn-modal-body">
            <label class="modal-field global-search-field">
                <span>Search term</span>
                <input type="text" id="globalSearchInput" placeholder="Type to search every note..." autocomplete="off">
            </label>
            <div class="global-search-filters">
                <div class="global-search-filter-block">
                    <p class="global-search-filter-title">Phases</p>
                    <div class="global-search-filter-list" id="globalSearchPhaseFilters"></div>
                </div>
                <div class="global-search-filter-block">
                    <p class="global-search-filter-title">Content type</p>
                    <div class="global-search-filter-list" id="globalSearchTypeFilters"></div>
                </div>
            </div>
            <div class="global-search-results" id="globalSearchResults"></div>
        </div>
    </div>
</div>

<div class="reset-toast" id="resetToast" role="alert">Playbook reset successfully</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="scripts/constants.js?v=2"></script>
<script src="scripts/utils.js?v=2"></script>
<script src="scripts/copy.js?v=2"></script>
<script src="scripts/modals.js?v=2"></script>
<script src="scripts/content.js?v=3"></script>
<script src="scripts/main.js?v=3"></script>
</body>
</html>
